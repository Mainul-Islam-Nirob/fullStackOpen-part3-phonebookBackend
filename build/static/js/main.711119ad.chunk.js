(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t(15),o=t.n(a),u=t(6),i=t(3),s=(t(21),function(e){var n=e.person,t=e.handleDelete;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[n.name," : "]}),Object(r.jsxs)("span",{children:[n.number," "]}),Object(r.jsx)("button",{onClick:function(){return t(n.id)},children:"Delete"})]})}),l=function(e){var n=e.filter,t=e.persons,c=e.filteredPersons,a=e.handleDelete;return Object(r.jsx)("div",{children:""===n?t.map((function(e){return Object(r.jsx)(s,{person:e,handleDelete:a},e.name)})):c.map((function(e){return Object(r.jsx)(s,{person:e,handleDelete:a},e.name)}))})},d=function(e){var n=e.label,t=e.type,c=e.value,a=e.onChange;return Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:n}),Object(r.jsx)("input",{type:t,value:c,onChange:a})]})},b=function(e){var n=e.onSubmit,t=e.newName,c=e.handleNameChange,a=e.newNumber,o=e.handleNumberChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsx)(d,{label:"Name:",type:"text",value:t,onChange:c}),Object(r.jsx)(d,{label:"Number:",type:"text",value:a,onChange:o}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Add"})})]})},j=t(4),f=t.n(j),h="/api/persons",m=function(){return f.a.get(h).then((function(e){return e.data}))},O=function(e){return f.a.post(h,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.className;return null===n?null:Object(r.jsx)("div",{className:t,children:n})},g=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),s=Object(i.a)(o,2),j=s[0],f=s[1],h=Object(c.useState)(""),g=Object(i.a)(h,2),w=g[0],N=g[1],C=Object(c.useState)(""),S=Object(i.a)(C,2),y=S[0],D=S[1],k=Object(c.useState)(null),T=Object(i.a)(k,2),P=T[0],A=T[1],E=Object(c.useState)(null),I=Object(i.a)(E,2),J=I[0],L=I[1];Object(c.useEffect)((function(){m().then((function(e){a(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(x,{message:(null===J||void 0===J?void 0:J.success)||(null===J||void 0===J?void 0:J.error),className:(null===J||void 0===J?void 0:J.success)?"success":(null===J||void 0===J?void 0:J.error)?"error":null}),Object(r.jsx)(d,{label:"Filter shown with:",value:y,onChange:function(e){D(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));A(n)}}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(b,{onSubmit:function(e){e.preventDefault();var n={name:j,number:w},r=t.some((function(e){return e.name===j}));if(""!==j){if(r){var c=t.find((function(e){return e.name===j})),o=Object(u.a)(Object(u.a)({},c),{},{number:w}),i=c.id;return window.confirm("".concat(j," is already added to phonebook, replact the old number with a new one?"))&&v(i,o).then((function(e){a(t.map((function(n){return n.id!==i?n:e}))),L({success:"Number updated for ".concat(c.name)}),setTimeout((function(){L(null)}),5e3)})),f(""),void N("")}O(n).then((function(e){a(t.concat(e)),L({success:"Added ".concat(e.name)}),setTimeout((function(){L(null)}),5e3),f(""),N("")})).catch((function(e){L({error:"".concat(e.response.data.error)}),setTimeout((function(){L(null)}),5e3)}))}},newName:j,handleNameChange:function(e){f(e.target.value)},newNumber:w,handleNumberChange:function(e){N(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(l,{filter:y,persons:t,filteredPersons:P,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&p(e).then((function(){var n=t.filter((function(n){return n.id!==e}));a(n),D("")})).catch((function(r){L({error:"Information of ".concat(n.name," has already been removed from server")}),setTimeout((function(){L({error:null})}),5e3),a(t.filter((function(n){return n.id!==e})))}))}})]})};o.a.render(Object(r.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.711119ad.chunk.js.map